// ngModal v0.1 by gwillie - https://github.com/gwillie/ngModal
// Licensed under GPLv2
(function(a){a.fn.extend({ngModal:function(m){var g={position:"fixed",background:"#000","z-index":99,top:"0px",left:"0px",height:"100%",width:"100%",display:"none"};var e={modal_fadein:400,modal_fadeout:750,modal_attr:"rel",scrollable:false,draggable:true,close_button:"",esc_key_close:true,animate_open:null,animate_close:null,overlay_enabled:true,overlay_id:"ngModal_overlay",overlay_close_on_click:true,overlay_opacity:0.6,overlay_fadein:350,overlay_fadeout:750,overlay_preset_css:null,overlay_animate_open:null,overlay_animate_close:null};var d=a(document),f=a("body");var c=a.extend(e,m);if(!document.getElementById(c.overlay_id)){f.append('<div id="'+c.overlay_id+'"></div>')}var l=a("#"+c.overlay_id);var h=a(this).attr(c.modal_attr);var k=a(h);if(c.overlay_preset_css===true){l.css(g)}else{if(c.overlay_preset_css!==null){l.css(c.overlay_preset_css)}}function b(n){return false}function i(n){if(n.keyCode===27){j(n.data.modal_id)}}function j(n){if(c.overlay_enabled){if(typeof c.overlay_animate_close==="function"){c.overlay_animate_close("#"+c.overlay_id)}else{l.fadeOut(c.overlay_fadeout)}}if(typeof c.animate_close==="function"){c.animate_close(n)}else{a(n).fadeOut(c.modal_fadeout)}if(c.esc_key_close){d.off("keyup",i)}if(!c.scrollable){f.off("DOMMouseScroll mousewheel scroll",b)}}return this.each(function(){a(this).click(function(n){if(c.esc_key_close){d.bind("keyup",{modal_id:h},i)}if(c.close_button!==""){a(c.close_button).one("click",function(){j(h)})}if(c.overlay_enabled){if(typeof c.overlay_animate_open==="function"){c.overlay_animate_open("#"+c.overlay_id)}else{l.fadeTo(c.overlay_fadein,c.overlay_opacity)}if(c.overlay_close_on_click){l.one("click",function(){j(h)})}}if(typeof c.animate_open==="function"){c.animate_open(h)}else{k.css({display:"block",position:"fixed",opacity:0,"z-index":10000,left:"50%",top:"50%"}).fadeTo(c.modal_fadein,1)}if(c.draggable){k.draggable()}if(!c.scrollable){f.on("DOMMouseScroll mousewheel scroll",b)}n.preventDefault()})})}})})(jQuery);
